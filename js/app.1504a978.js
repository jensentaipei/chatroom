(function(e){function t(t){for(var o,a,i=t[0],u=t[1],l=t[2],s=0,f=[];s<i.length;s++)a=i[s],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);d&&d(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(o=!1)}o&&(r.splice(t--,1),e=u(u.s=n[0]))}return e}var o={},a={app:0},c={app:0},r=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-61f9bb4f":"4a9347ac"}[e]+".js"}function u(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-61f9bb4f":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-61f9bb4f":"fb996d40"}[e]+".css",c=u.p+o,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var l=r[i],s=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(s===o||s===c))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){l=f[i],s=l.getAttribute("data-href");if(s===o||s===c)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var o=t&&t.target&&t.target.src||c,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete a[e],d.parentNode.removeChild(d),n(r)},d.href=c;var b=document.getElementsByTagName("head")[0];b.appendChild(d)})).then((function(){a[e]=0})));var o=c[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,n){o=c[e]=[t,n]}));t.push(o[2]=r);var l,s=document.createElement("script");s.charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.src=i(e);var f=new Error;l=function(t){s.onerror=s.onload=null,clearTimeout(d);var n=c[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",f.name="ChunkLoadError",f.type=o,f.request=a,n[1](f)}c[e]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:s})}),12e4);s.onerror=s.onload=l,document.head.appendChild(s)}return Promise.all(t)},u.m=e,u.c=o,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)u.d(n,o,function(t){return e[t]}.bind(null,o));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/chatroom/",u.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var f=0;f<l.length;f++)t(l[f]);var d=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0abb":function(e,t,n){},"17e1":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("260b"),a=(n("e71f"),n("ea7b"),n("66ce"),{apiKey:"AIzaSyCjCeLn-SmIs_bMsxrb0s5AnefoT2gYMc4",authDomain:"chatroom-a899a.firebaseapp.com",projectId:"chatroom-a899a",storageBucket:"chatroom-a899a.appspot.com",messagingSenderId:"977885964148",appId:"1:977885964148:web:cccbf27e6a6bd358caae21",measurementId:"G-BJP0R6YCM1"}),c=o["a"].initializeApp(a),r=o["a"].firestore;r.Timestamp,r.GeoPoint;c.firestore().settings({timestampsInSnapshots:!0})},"34e2":function(e,t,n){"use strict";n("0abb")},"44c2":function(e,t,n){"use strict";n("1276"),n("ac1f"),n("99af");t["a"]=function(){function e(e){for(var t=e+"=",n=decodeURIComponent(document.cookie),o=n.split(";"),a=0;a<o.length;a++){var c=o[a];while(" "==c.charAt(0))c=c.substring(1);if(0==c.indexOf(t))return c.substring(t.length,c.length)}return""}function t(e,t){document.cookie="".concat(e,"=").concat(t)}return{getCookie:e,setCookie:t}}},"4a7a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var o=n("2241"),a=n("3104"),c=n("565f"),r=n("2bdd"),i=n("7744"),u=n("ad06"),l=n("58e6"),s=n("6b41"),f=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("7a23")),d=n("3fd4"),b=(n("7dd6"),n("833e"),n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),m=Object(f["fb"])("data-v-2fc82bef");Object(f["H"])("data-v-2fc82bef");var p={id:"header"},j=Object(f["n"])("div",{class:"searchBar"},null,-1),v={id:"list","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},h=Object(f["n"])("div",{style:{"font-size":"18px","font-family":"serif",color:"#1d1e22"}}," Enter room name ",-1);Object(f["F"])();var O=m((function(e,t,n,o,a,c){var r=Object(f["N"])("van-icon"),i=Object(f["N"])("van-nav-bar"),u=Object(f["N"])("RoomList"),l=Object(f["N"])("van-field"),s=Object(f["N"])("van-dialog"),d=Object(f["O"])("loading");return Object(f["E"])(),Object(f["j"])("div",null,[Object(f["n"])("div",p,[Object(f["n"])(i,{"left-text":"Chat"},{right:m((function(){return[Object(f["n"])(r,{name:"chat-o",size:"3rem",onClick:t[1]||(t[1]=function(e){return o.show=!0})})]})),_:1})]),j,Object(f["cb"])(Object(f["n"])("div",v,[Object(f["n"])(u,{onClickRoom:o.toRoom,onLoadingFinish:o.toFinish},null,8,["onClickRoom","onLoadingFinish"])],512),[[d,o.onloading]]),Object(f["n"])("div",null,[Object(f["n"])(s,{show:o.show,"confirm-button-text":"確認","confirm-button-color":"#1d1e22",onConfirm:o.addRoom,onCancel:o.cancelRoom,"show-cancel-button":""},{title:m((function(){return[h]})),default:m((function(){return[Object(f["n"])(l,{modelValue:o.inputVal,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.inputVal=e}),label:"RoomName"},null,8,["modelValue"])]})),_:1},8,["show","onConfirm","onCancel"])])])})),g=n("a1e9"),y=n("5c40"),k=Object(f["fb"])("data-v-58904988");Object(f["H"])("data-v-58904988");var w={class:"list"},C={style:{"text-align":"left","font-size":"18px","font-family":"serif",color:"white"}},R={style:{"text-align":"left","font-size":"14px","padding-left":"10px",color:"#c8c9cc"}},x={key:0},E={key:1},M={style:{"text-align":"right","font-size":"10px",color:"#c8c9cc"}};Object(f["F"])();var _=k((function(e,t,n,o,a,c){var r=Object(f["N"])("van-cell");return Object(f["E"])(),Object(f["j"])("div",w,[(Object(f["E"])(!0),Object(f["j"])(f["b"],null,Object(f["L"])(o.roomList.value,(function(e){return Object(f["E"])(),Object(f["j"])(r,{key:e.id,onClick:function(t){return o.clickRoom(e.id)}},{title:k((function(){return[Object(f["n"])("div",C,Object(f["R"])(e.roomName),1)]})),label:k((function(){return[Object(f["n"])("div",R,[e.lastMsg?(Object(f["E"])(),Object(f["j"])("span",x,Object(f["R"])(e.lastMsg),1)):(Object(f["E"])(),Object(f["j"])("span",E,"   "))])]})),extra:k((function(){return[Object(f["n"])("div",M,Object(f["R"])(o.timestamp2Date(e.lastMsgTime.seconds)),1)]})),_:2},1032,["onClick"])})),128))])})),N=(n("159b"),n("17e1")),L=n("d149"),S={name:"RoomList",setup:function(e,t){var n,o=t.emit,a=Object(L["a"])(),c=a.timestamp2Date,r=Object(g["i"])([]),i=N["a"].firestore();function u(){return new Promise((function(e){n&&n(),n=i.collection("ChatRoom").orderBy("lastMsgTime","desc").onSnapshot((function(t){var n=[];t.forEach((function(e){var t=e.data(),o={id:e.id,lastMsg:t.lastMsg,lastMsgTime:t.lastMsgTime,roomName:t.roomName};n.push(o)})),r.value=n,e()}))}))}function l(e){o("clickRoom",e)}return Object(y["F"])((function(){u().then((function(){o("loadingFinish")}))})),{roomList:r,timestamp2Date:c,clickRoom:l}}};S.render=_,S.__scopeId="data-v-58904988";var A=S,P={name:"ListView",components:{RoomList:A},setup:function(){var e=Object(b["d"])(),t=N["a"].firestore(),n=Object(g["j"])(!0),o=Object(g["j"])(!1),a=Object(g["j"])("");function c(t){e.push({name:"ChatRoom",params:{id:t}})}function r(){n.value=!1}function i(){if(a.value){var e=t.collection("ChatRoom").doc(),n=new Date;e.set({lastMsg:"",lastMsgTime:n,roomName:a.value}).then((function(){console.log("send msg success"),o.value=!1,a.value=""}))}}function u(){o.value=!1,a.value=""}return Object(y["F"])((function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t=document.querySelector("#header").clientHeight,n=document.querySelector("#list").style;n.minHeight="".concat(e-t,"px"),n.paddingTop="".concat(t,"px")})),{toRoom:c,toFinish:r,addRoom:i,show:o,cancelRoom:u,inputVal:a,onloading:n}}};n("34e2");P.render=O,P.__scopeId="data-v-2fc82bef";var T=P,V=[{path:"/",name:"ListView",meta:{keepAlive:!0},component:T},{path:"/ChatRoom/:id",name:"ChatRoom",component:function(){return n.e("chunk-61f9bb4f").then(n.bind(null,"bf48"))}}],F=Object(b["a"])({history:Object(b["b"])("/chatroom/"),routes:V}),I=F,D=n("5502"),H=n("44c2"),z=Object(H["a"])(),B=z.setCookie,U={checkUser:function(e,t){e.user=t},setUser:function(e,t){B("user",t),e.user=t}},J={user:""},q=Object(D["a"])({state:J,mutations:U}),Y=Object(f["fb"])("data-v-5063c596");Object(f["H"])("data-v-5063c596");var G=Object(f["n"])("div",{style:{"font-size":"18px","font-family":"serif",color:"#1d1e22"}}," Enter username ",-1);Object(f["F"])();var K=Y((function(e,t,n,o,a,c){var r=Object(f["N"])("van-field"),i=Object(f["N"])("van-dialog"),u=Object(f["N"])("router-view");return Object(f["E"])(),Object(f["j"])("div",null,[Object(f["n"])("div",null,[Object(f["n"])(i,{show:o.show,"confirm-button-text":"確認","confirm-button-color":"#1d1e22",onConfirm:o.check},{title:Y((function(){return[G]})),default:Y((function(){return[Object(f["n"])(r,{modelValue:o.inputVal,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.inputVal=e}),label:"Username"},null,8,["modelValue"])]})),_:1},8,["show","onConfirm"])]),Object(f["n"])(u,null,{default:Y((function(t){var n=t.Component;return[(Object(f["E"])(),Object(f["j"])(f["c"],null,[e.$route.meta.keepAlive?(Object(f["E"])(),Object(f["j"])(Object(f["P"])(n),{key:0})):Object(f["k"])("",!0)],1024)),e.$route.meta.keepAlive?Object(f["k"])("",!0):(Object(f["E"])(),Object(f["j"])(Object(f["P"])(n),{key:0}))]})),_:1})])})),$={setup:function(){var e=Object(H["a"])(),t=e.getCookie,n=e.setCookie,o=Object(b["d"])(),a=Object(g["j"])(""),c=Object(g["j"])(!0),r=Object(y["h"])((function(){return!c.value&&(o.push({name:"ListView"}),!0)}));function i(){var e=""!==a.value;e&&(n("user",a.value),a.value="",c.value=!0)}Object(y["F"])((function(){c.value=!!t("user")}));setInterval((function(){t("user")||(c.value=!1)}),1e4);return{show:r,inputVal:a,check:i}}};n("fdd7");$.render=K,$.__scopeId="data-v-5063c596";var Q=$,W=Object(f["i"])(Q);W.use(d["a"]),W.use(s["a"]),W.use(l["a"]),W.use(u["a"]),W.use(i["a"]),W.use(r["a"]),W.use(c["a"]),W.use(a["a"]),W.use(o["a"]),W.use(I),W.use(q),W.mount("#app")},d149:function(e,t,n){"use strict";t["a"]=function(){function e(e){var t=new Date(1e3*e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=t.getFullYear(),a=n[t.getMonth()],c=t.getDate(),r=t.getHours(),i=t.getMinutes();return c+" "+a+" "+o+" "+r+":"+i}return{timestamp2Date:e}}},fdd7:function(e,t,n){"use strict";n("4a7a")}});